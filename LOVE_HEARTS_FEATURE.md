# ❤️ 爱心星级系统说明

## 🎨 功能说明

将小食堂的价格系统改为更温馨的**爱心星级系统**！用 ❤️ 代替冰冷的金额数字，让点餐变得更有爱！

## ⭐ 星级规则

### 素菜（1-2颗❤️）
- **拍黄瓜**：1❤️
- **凉拌木耳**：1❤️
- **番茄蛋花汤**：2❤️
- **酸辣汤**：2❤️
- **煎饺**：2❤️

### 荤菜（3-5颗❤️）
- **宫保鸡丁**：4❤️
- **鱼香肉丝**：3❤️
- **麻婆豆腐**：3❤️
- **红烧排骨**：5❤️
- **清蒸鲈鱼**：5❤️
- **夫妻肺片**：4❤️

### 主食（2-3颗❤️）
- **扬州炒饭**：3❤️
- **兰州拉面**：2❤️

### 甜品（1-2颗❤️）
- **红豆汤圆**：2❤️
- **芒果布丁**：2❤️

### 饮料（1-2颗❤️）
- **鲜榨橙汁**：2❤️
- **柠檬绿茶**：1❤️
- **奶茶**：2❤️

### 配送费
- **配送费**：1❤️

## 📱 界面展示

### 1. 菜品列表页
```
┌─────────────────────┐
│ 🍗 宫保鸡丁         │
│ 经典川菜...          │
│ ⭐ 4.8  已售 256份  │
│ ❤️❤️❤️❤️      [+]   │
└─────────────────────┘
```

### 2. 购物车页
```
┌─────────────────────┐
│ 🍗 宫保鸡丁         │
│ ❤️❤️❤️❤️            │
│ [-] 2 [+]           │
│ 小计：❤️❤️❤️❤️❤️❤️❤️❤️ │
└─────────────────────┘

合计：❤️❤️❤️❤️❤️❤️❤️❤️❤️
```

### 3. 订单结算页
```
订单明细
├─ 🍗 宫保鸡丁 x2  ❤️❤️❤️❤️❤️❤️❤️❤️
├─ 🥒 拍黄瓜 x1    ❤️
└─────────────────
小计：❤️❤️❤️❤️❤️❤️❤️❤️❤️
配送费：❤️
───────────────────
合计：❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️
```

### 4. 历史订单页
```
订单 #12345
2025-12-01 12:30
├─ 🍗 宫保鸡丁 x1  ❤️❤️❤️❤️
├─ 🍚 扬州炒饭 x1  ❤️❤️❤️
└─────────────────
总计：❤️❤️❤️❤️❤️❤️❤️❤️
```

## 🛠️ 技术实现

### 修改的文件

#### 1. 数据层
- **`miniprogram/utils/dishData.js`**
  - 为每个菜品添加 `stars` 字段
  - 记录每道菜的爱心数量

#### 2. 菜品列表页
- **`miniprogram/pages/index/index.wxml`**
  - 将价格显示改为爱心循环显示
- **`miniprogram/pages/index/index.wxss`**
  - 添加 `.dish-stars` 和 `.star-icon` 样式

#### 3. 购物车页
- **`miniprogram/pages/cart/cart.js`**
  - 计算每项和总计的爱心数量
  - 添加 `totalStars` 字段
- **`miniprogram/pages/cart/cart.wxml`**
  - 单价、小计、合计都改为爱心显示
- **`miniprogram/pages/cart/cart.wxss`**
  - 添加爱心显示样式

#### 4. 订单结算页
- **`miniprogram/pages/order/order.js`**
  - 计算订单总爱心数
  - 配送费：1颗爱心
- **`miniprogram/pages/order/order.wxml`**
  - 所有价格改为爱心显示
- **`miniprogram/pages/order/order.wxss`**
  - 添加爱心样式

#### 5. 历史订单页
- **`miniprogram/pages/orders/orders.js`**
  - 为历史订单计算爱心数
- **`miniprogram/pages/orders/orders.wxml`**
  - 订单详情改为爱心显示
- **`miniprogram/pages/orders/orders.wxss`**
  - 添加爱心样式

## 🎯 核心代码

### 显示爱心的WXML代码
```xml
<view class="dish-stars">
  <block wx:for="{{item.stars}}" wx:for-item="star" wx:key="*this">
    <text class="star-icon">❤️</text>
  </block>
</view>
```

### 计算总爱心的JS代码
```javascript
// 计算总爱心数
const totalStars = cartItems.reduce((sum, item) => {
  return sum + (item.dish.stars || 0) * item.quantity;
}, 0);
```

### 爱心显示的CSS样式
```css
.dish-stars {
  display: flex;
  align-items: center;
  gap: 4rpx;
}

.star-icon {
  font-size: 32rpx;
  line-height: 1;
}

.star-icon-large {
  font-size: 40rpx;
  line-height: 1;
}
```

## 💝 特色设计

### 1. 分级合理
- 素菜价值低，1-2颗爱心
- 荤菜价值高，3-5颗爱心
- 配送费象征性1颗爱心

### 2. 视觉友好
- 用 ❤️ 代替金额数字
- 去商业化，更温馨
- 符合"阿汤的小食堂"温暖定位

### 3. 灵活扩展
- 可以轻松调整每道菜的爱心数
- 在 `dishData.js` 中修改 `stars` 值即可

## 📊 数据对照表

| 菜品 | 原价格 | 爱心数 | Emoji |
|------|--------|--------|-------|
| 拍黄瓜 | ¥12 | 1❤️ | 🥒 |
| 凉拌木耳 | ¥15 | 1❤️ | 🍄 |
| 番茄蛋花汤 | ¥18 | 2❤️ | 🍅 |
| 煎饺 | ¥18 | 2❤️ | 🥟 |
| 酸辣汤 | ¥20 | 2❤️ | 🥣 |
| 兰州拉面 | ¥22 | 2❤️ | 🍜 |
| 扬州炒饭 | ¥25 | 3❤️ | 🍚 |
| 麻婆豆腐 | ¥28 | 3❤️ | 🌶️ |
| 鱼香肉丝 | ¥32 | 3❤️ | 🥩 |
| 夫妻肺片 | ¥36 | 4❤️ | 🥓 |
| 宫保鸡丁 | ¥38 | 4❤️ | 🍗 |
| 红烧排骨 | ¥48 | 5❤️ | 🍖 |
| 清蒸鲈鱼 | ¥68 | 5❤️ | 🐟 |
| 柠檬绿茶 | ¥12 | 1❤️ | 🍋 |
| 红豆汤圆 | ¥15 | 2❤️ | 🍡 |
| 鲜榨橙汁 | ¥15 | 2❤️ | 🍊 |
| 奶茶 | ¥16 | 2❤️ | 🧋 |
| 芒果布丁 | ¥18 | 2❤️ | 🍮 |

## 🎉 用户体验提升

### 优点
1. **去商业化** - 不再是冰冷的金额，而是温暖的爱心
2. **更有趣** - 用爱心衡量食物价值，更有创意
3. **视觉友好** - ❤️ emoji 更加吸引眼球
4. **品牌差异化** - 与其他点餐系统不同，更有特色

### 注意事项
1. 价格数据（price字段）仍然保留，方便后期恢复或统计
2. 爱心系统仅用于展示，不影响实际数据计算
3. 可以根据用户反馈随时调整星级规则

## 🔧 维护指南

### 修改某道菜的爱心数
打开 `miniprogram/utils/dishData.js`，找到对应菜品，修改 `stars` 值：

```javascript
{
  id: '1',
  name: '宫保鸡丁',
  stars: 4,  // ← 修改这里
  // ... 其他字段
}
```

### 添加新菜品
确保添加 `stars` 字段：

```javascript
{
  id: '19',
  name: '新菜品',
  price: 25.0,
  stars: 3,  // ← 必须添加
  emoji: '🍲',
  category: 'hot',
  // ... 其他字段
}
```

## 📝 更新日志

### v1.0.0 (2025-12-01)
- ✅ 为所有菜品添加 stars 字段
- ✅ 菜品列表显示爱心
- ✅ 购物车显示爱心
- ✅ 订单结算显示爱心
- ✅ 历史订单显示爱心
- ✅ 配送费设为 1颗爱心

---

**让阿汤的小食堂充满爱！** ❤️❤️❤️


