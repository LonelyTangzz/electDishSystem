<!--pages/index/index.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="æœç´¢èœå“åç§°" 
      value="{{searchKeyword}}"
      bindinput="onSearchInput"
      confirm-type="search"
    />
    <text wx:if="{{searchKeyword}}" class="clear-search" bindtap="onClearSearch">Ã—</text>
  </view>

  <!-- åˆ†ç±»æ»šåŠ¨ -->
  <scroll-view class="category-scroll" scroll-x>
    <view class="category-list">
      <view 
        wx:for="{{categories}}" 
        wx:key="id"
        class="category-item {{currentCategory === item.id ? 'active' : ''}}"
        data-id="{{item.id}}"
        bindtap="onCategoryTap"
      >
        {{item.name}}
      </view>
    </view>
  </scroll-view>

  <!-- èœå“åˆ—è¡¨ -->
  <view class="dish-list">
    <view 
      wx:for="{{filteredDishes}}" 
      wx:key="id"
      class="dish-item card"
    >
      <view class="dish-image-wrapper">
        <text class="dish-emoji">{{item.emoji}}</text>
        <view wx:if="{{getDishQuantity(item.id) > 0}}" class="cart-badge">
          {{getDishQuantity(item.id)}}
        </view>
      </view>
      
      <view class="dish-info">
        <view class="dish-name">{{item.name}}</view>
        <view class="dish-description">{{item.description}}</view>
        <view class="dish-meta">
          <text class="dish-rating">â­ {{item.rating}}</text>
          <text class="dish-sold">å·²å”® {{item.soldCount}} ä»½</text>
        </view>
        <view class="dish-price-actions">
          <text class="dish-price">Â¥{{item.price}}</text>
          <view class="quantity-control">
            <block wx:if="{{getDishQuantity(item.id) > 0}}">
              <view class="control-btn" data-id="{{item.id}}" bindtap="onDecrease">ï¼</view>
              <text class="quantity-text">{{getDishQuantity(item.id)}}</text>
            </block>
            <view class="control-btn add-btn" data-id="{{item.id}}" bindtap="onIncrease">ï¼‹</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{filteredDishes.length === 0 && !loading}}" class="empty-state">
    <view class="empty-icon">ğŸ½ï¸</view>
    <view class="empty-text">æš‚æ— èœå“</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-state">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>
