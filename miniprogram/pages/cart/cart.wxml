<!--pages/cart/cart.wxml-->
<view class="container">
  <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
  <view wx:if="{{!isEmpty}}" class="cart-content">
    <view class="cart-header">
      <text class="cart-title">ğŸ›’ è´­ç‰©è½¦</text>
      <text class="cart-count">å…± {{cartItems.length}} ä»¶å•†å“</text>
    </view>

    <view class="cart-list">
      <view 
        wx:for="{{cartItems}}" 
        wx:key="index"
        class="cart-item card"
      >
        <!-- å•†å“ä¿¡æ¯ -->
        <view class="item-main">
          <!-- èœå“å›¾æ ‡ -->
          <view class="item-image">
            <text class="item-emoji">{{item.dish.emoji}}</text>
          </view>
          
          <!-- èœå“è¯¦æƒ… -->
          <view class="item-details">
            <view class="item-name">{{item.dish.name}}</view>
            <view class="item-price">Â¥{{item.dish.price}}</view>
          </view>

          <!-- åˆ é™¤æŒ‰é’® -->
          <view 
            class="remove-btn"
            data-id="{{item.dish.id}}"
            data-name="{{item.dish.name}}"
            bindtap="onRemove"
          >
            <text class="remove-icon">ğŸ—‘ï¸</text>
          </view>
        </view>

        <!-- æ•°é‡æ§åˆ¶å’Œå°è®¡ -->
        <view class="item-footer">
          <view class="quantity-control">
            <view 
              class="control-btn decrease-btn"
              data-id="{{item.dish.id}}"
              bindtap="onDecrease"
            >
              ï¼
            </view>
            <text class="quantity-text">{{item.quantity}}</text>
            <view 
              class="control-btn increase-btn"
              data-id="{{item.dish.id}}"
              bindtap="onIncrease"
            >
              ï¼‹
            </view>
          </view>
          
          <view class="item-total">
            <text class="total-label">å°è®¡</text>
            <text class="total-price">Â¥{{item.itemTotal}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ¸…ç©ºè´­ç‰©è½¦æŒ‰é’® -->
    <view class="clear-section">
      <button class="clear-btn" bindtap="onClear">
        <text class="clear-icon">ğŸ—‘ï¸</text>
        <text>æ¸…ç©ºè´­ç‰©è½¦</text>
      </button>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <view class="empty-icon">ğŸ›’</view>
    <view class="empty-text">è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„</view>
    <view class="empty-hint">å¿«å»é˜¿æ±¤çš„å°é£Ÿå ‚ç‚¹é¤å§ï¼</view>
    <button class="go-shopping-btn" bindtap="goToIndex" hover-class="none">å»ç‚¹é¤</button>
  </view>

  <!-- åº•éƒ¨ç»“ç®—æ  -->
  <view wx:if="{{!isEmpty}}" class="checkout-bar">
    <view class="total-section">
      <view class="total-label">åˆè®¡</view>
      <view class="total-amount">
        <text class="currency">Â¥</text>
        <text class="price">{{formattedTotalPrice}}</text>
      </view>
    </view>
    <button class="checkout-btn" bindtap="onCheckout">
      å»ç»“ç®—
    </button>
  </view>
</view>
