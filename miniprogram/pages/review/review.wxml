<!--pages/review/review.wxml-->
<view class="container">
  <!-- æ€»ä½“è¯„åˆ† -->
  <view class="card overall-section">
    <view class="section-title">ğŸ“ æ€»ä½“è¯„ä»·</view>
    
    <view class="rating-box">
      <view class="rating-stars">
        <view 
          wx:for="{{[1,2,3,4,5]}}" 
          wx:key="*this"
          class="star {{overallRating >= item ? 'active' : ''}}"
          data-rating="{{item}}"
          bindtap="onOverallRatingChange"
        >
          â­
        </view>
      </view>
      <text class="rating-text">{{overallRating}}åˆ†</text>
    </view>

    <textarea 
      class="comment-input"
      placeholder="è¯´è¯´æ‚¨çš„ç”¨é¤ä½“éªŒå§..."
      value="{{comment}}"
      bindinput="onCommentInput"
      maxlength="200"
    />
  </view>

  <!-- èœå“è¯„ä»· -->
  <view class="card dishes-section">
    <view class="section-title">ğŸ½ï¸ èœå“è¯„ä»·</view>
    
    <view 
      wx:for="{{reviews}}" 
      wx:key="dishId"
      class="dish-review-item"
    >
      <view class="dish-header">
        <view class="dish-emoji">{{item.dishEmoji}}</view>
        <text class="dish-name">{{item.dishName}}</text>
      </view>

      <view class="rating-box">
        <view class="rating-stars">
          <view 
            wx:for="{{[1,2,3,4,5]}}" 
            wx:for-item="star"
            wx:key="*this"
            class="star {{item.rating >= star ? 'active' : ''}}"
            data-index="{{index}}"
            data-rating="{{star}}"
            bindtap="onRatingChange"
          >
            â­
          </view>
        </view>
        <text class="rating-text">{{item.rating}}åˆ†</text>
      </view>

      <input 
        class="dish-comment"
        placeholder="è¯´è¯´è¿™é“èœçš„å‘³é“..."
        value="{{item.comment}}"
        data-index="{{index}}"
        bindinput="onCommentInput"
      />
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-wrapper">
    <button class="submit-btn btn-primary" bindtap="onSubmitReview">
      æäº¤è¯„ä»·
    </button>
  </view>
</view>

