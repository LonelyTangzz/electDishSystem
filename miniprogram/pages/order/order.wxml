<!--pages/order/order.wxml-->
<view class="container">
  <!-- 联系人信息 -->
  <view class="card contact-section">
    <view class="section-header">
      <text class="section-icon">👤</text>
      <text class="section-title">联系人信息</text>
    </view>
    
    <view class="form-item">
      <view class="form-label">联系人</view>
      <input 
        class="form-input" 
        type="text"
        placeholder="请输入联系人姓名"
        value="{{contactName}}"
        bindinput="onContactNameInput"
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <view class="form-label">订单备注</view>
      <textarea 
        class="form-textarea" 
        placeholder="口味、餐具等特殊要求..."
        value="{{remarks}}"
        bindinput="onRemarksInput"
        maxlength="200"
        show-confirm-bar="{{false}}"
      />
    </view>
  </view>

  <!-- 订单明细 -->
  <view class="card order-section">
    <view class="section-header">
      <text class="section-icon">📋</text>
      <text class="section-title">订单明细</text>
    </view>
    
    <view class="order-items">
      <view 
        wx:for="{{cartItems}}" 
        wx:key="index"
        class="order-item"
      >
        <view class="item-emoji">{{item.dish.emoji}}</view>
        <view class="item-info">
          <text class="item-name">{{item.dish.name}}</text>
          <text class="item-quantity">x{{item.quantity}}</text>
        </view>
        <view class="item-stars">
          <block wx:for="{{item.totalStars}}" wx:for-item="star" wx:key="*this">
            <text class="star-icon">❤️</text>
          </block>
        </view>
      </view>
    </view>

    <!-- 费用明细 -->
    <view class="price-section">
      <view class="price-row">
        <text class="price-label">小计</text>
        <view class="price-stars">
          <block wx:for="{{subtotalStars}}" wx:for-item="star" wx:key="*this">
            <text class="star-icon">❤️</text>
          </block>
        </view>
      </view>

      <view class="price-row">
        <text class="price-label">配送费</text>
        <view class="price-stars">
          <block wx:for="{{deliveryStars}}" wx:for-item="star" wx:key="*this">
            <text class="star-icon">❤️</text>
          </block>
        </view>
      </view>

      <view class="divider"></view>

      <view class="price-row total-row">
        <text class="price-label total-label">合计</text>
        <view class="price-stars total-stars">
          <block wx:for="{{totalStars}}" wx:for-item="star" wx:key="*this">
            <text class="star-icon-large">❤️</text>
          </block>
        </view>
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button class="submit-btn" bindtap="onSubmitOrder">
      <text class="submit-icon">✓</text>
      <text>提交订单</text>
    </button>
  </view>

  <!-- Demo提示 -->
  <view wx:if="{{demoMode}}" class="demo-tip">
    💡 当前为Demo模式，订单将保存在本地
  </view>
</view>
