# 阿汤的小食堂 (ElectDishSystem)

一个功能完整的外卖点餐系统，包含：
- 🤖 **Android应用** - 使用Kotlin开发，采用Material Design设计规范
- 📱 **微信小程序** - 基于微信云开发，支持用户登录、订单管理、评价系统

## 功能特性

### 🍜 核心功能（Android + 微信小程序）
- **菜品浏览**: 展示各类美食菜品，支持分类浏览
- **购物车管理**: 添加、修改、删除购物车商品
- **订单提交**: 填写配送信息并提交订单
- **用户登录**: 微信小程序支持微信授权登录
- **订单历史**: 查看历史订单记录
- **评价系统**: 对订单进行评分和评价
- **云数据库**: 微信小程序集成云开发数据库

### 🎨 界面特点
- Material Design 设计规范（Android）
- 微信小程序原生设计风格
- 现代化的UI界面
- 流畅的用户体验
- 响应式布局设计

## 技术栈

### Android 应用
- **开发语言**: Kotlin
- **最低SDK版本**: Android 7.0 (API 24)
- **目标SDK版本**: Android 14 (API 34)
- **架构模式**: MVVM架构准备（当前为简化版本）
- **主要依赖库**:
  - AndroidX Core & AppCompat
  - Material Components
  - RecyclerView & CardView
  - ViewModel & LiveData
  - Kotlin Coroutines
  - Gson

### 微信小程序
- **开发语言**: JavaScript (WXML, WXSS, JS)
- **云服务**: 微信云开发
- **数据库**: 云数据库
- **云函数**: Node.js
- **存储**: 云存储（预留）
- **主要功能**:
  - 用户授权登录
  - 云数据库 CRUD 操作
  - TabBar 导航
  - 购物车本地存储
  - 订单管理

## 项目结构

```
electDishSystem/
├── app/                           # Android 应用
│   └── src/main/java/com/electdish/system/
│       ├── adapter/               # RecyclerView适配器
│       ├── data/                  # 数据层
│       └── ui/                    # UI层
│
├── miniprogram/                   # 微信小程序
│   ├── pages/                     # 页面
│   │   ├── index/                # 首页（菜品列表）
│   │   ├── cart/                 # 购物车
│   │   ├── order/                # 订单确认
│   │   ├── orders/               # 订单历史
│   │   ├── mine/                 # 我的（用户中心）
│   │   └── review/               # 评价页面
│   ├── utils/                     # 工具类
│   │   ├── cartManager.js        # 购物车管理
│   │   ├── db.js                 # 云数据库操作
│   │   ├── dishData.js           # 本地菜品数据
│   │   ├── demoStorage.js        # 演示模式存储
│   │   └── util.js               # 通用工具
│   ├── database/                  # 数据库导入文件
│   ├── app.js                     # 小程序全局逻辑
│   ├── app.json                   # 小程序全局配置
│   └── app.wxss                   # 小程序全局样式
│
└── cloudfunctions/                # 云函数
    └── login/                     # 用户登录云函数
```

## 功能说明

### 1. 主界面 (MainActivity)
- 显示所有可用菜品
- 支持按分类筛选菜品
- 实时搜索菜品
- 快速添加菜品到购物车
- 显示购物车商品数量

### 2. 购物车页面 (CartActivity)
- 查看购物车中的所有商品
- 调整商品数量（增加/减少）
- 删除购物车商品
- 显示订单总价
- 进入结算流程

### 3. 订单确认页面 (OrderConfirmActivity)
- 填写配送地址
- 输入联系电话
- 添加订单备注
- 查看订单明细
- 显示配送费和总金额
- 提交订单

## 数据模型

### Dish (菜品)
- ID、名称、描述
- 价格、分类
- 评分、销量
- 图片URL、是否可用

### CartItem (购物车项)
- 关联的菜品
- 购买数量
- 小计金额

### Order (订单)
- 订单ID、订单项列表
- 总金额、下单时间
- 配送地址、联系电话
- 订单备注、订单状态

## 安装和运行

### 📱 微信小程序

#### 环境要求
- 微信开发者工具
- 微信小程序 AppID
- 微信云开发环境

#### 快速开始
1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd electDishSystem
   ```

2. **打开微信开发者工具**
   - 导入项目，选择 `electDishSystem` 目录
   - 填入您的 AppID

3. **配置云开发**
   - 在 `app.js` 中配置云环境 ID
   - 右键 `cloudfunctions` 文件夹，选择"上传并部署：所有文件"
   - 在云开发控制台创建数据库集合（详见 `miniprogram/CLOUD_SETUP_QUICK.md`）

4. **初始化数据**
   - 运行小程序，进入"我的"页面
   - 点击"初始化云数据库"按钮

5. **开始使用**
   - 返回首页即可看到菜品列表

📖 **详细文档**: 
- [快速开始指南](miniprogram/CLOUD_SETUP_QUICK.md)
- [演示模式说明](miniprogram/DEMO_MODE.md)
- [功能升级文档](miniprogram/FEATURES_UPGRADE.md)

---

### 🤖 Android 应用

#### 环境要求
- Android Studio Hedgehog (2023.1.1) 或更高版本
- JDK 17 或更高版本
- Android SDK API 34

#### 运行步骤

1. **克隆项目**（如已克隆可跳过）
   ```bash
   git clone <repository-url>
   cd electDishSystem
   ```

2. **打开项目**
   - 使用Android Studio打开项目
   - 等待Gradle同步完成

3. **运行应用**
   - 连接Android设备或启动模拟器
   - 点击运行按钮或使用快捷键 `Shift + F10`

📖 **详细文档**:
- [快速开始指南](QUICKSTART.md)
- [安装 Android Studio](INSTALL_ANDROID_STUDIO.md)
- [Gradle 错误修复](FIX_GRADLE_ERROR.md)

## 使用说明

1. **浏览菜品**
   - 打开应用后，可以看到所有可用菜品
   - 点击顶部分类标签筛选不同类型的菜品
   - 使用搜索框快速查找想要的菜品

2. **添加到购物车**
   - 点击菜品卡片上的"加入购物车"按钮
   - 右下角的购物车按钮会显示当前商品数量

3. **管理购物车**
   - 点击右下角的购物车按钮进入购物车页面
   - 可以调整商品数量或删除商品
   - 查看订单总价

4. **提交订单**
   - 在购物车页面点击"去结算"按钮
   - 填写配送地址和联系电话（必填）
   - 可选择添加订单备注
   - 点击"提交订单"完成下单

5. **订单完成**
   - 提交成功后会显示订单信息
   - 购物车自动清空
   - 可以返回首页继续购物

## 特色功能

### 1. 单例购物车管理
使用单例模式管理购物车状态，确保全局数据一致性。

### 2. 实时数据更新
- 购物车数量实时更新
- 价格自动计算
- 界面响应迅速

### 3. 输入验证
- 地址和电话号码验证
- 手机号格式检查
- 友好的错误提示

### 4. 用户体验优化
- 流畅的滚动体验
- 精美的卡片布局
- 清晰的操作反馈

## 数据来源

当前版本使用模拟数据（`DishRepository.kt`），包含18道示例菜品。

在实际应用中，可以：
- 连接REST API获取远程数据
- 使用Room数据库存储本地数据
- 实现数据缓存机制

## 后续优化方向

### 功能增强
- [ ] 菜品详情页面
- [ ] 订单历史记录
- [ ] 用户登录/注册
- [ ] 收藏夹功能
- [ ] 评价系统
- [ ] 优惠券和促销活动
- [ ] 多种支付方式
- [ ] 订单实时追踪

### 技术优化
- [ ] 集成网络请求（Retrofit）
- [ ] 本地数据库存储（Room）
- [ ] 图片加载优化（Glide/Coil）
- [ ] 完整的MVVM架构
- [ ] 依赖注入（Hilt/Koin）
- [ ] 单元测试和UI测试
- [ ] 性能优化和内存管理

### UI/UX改进
- [ ] 深色模式支持
- [ ] 动画效果增强
- [ ] 多语言支持
- [ ] 无障碍功能
- [ ] 平板电脑适配

## 截图

_注：实际应用中可以在此添加应用截图_

## 许可证

此项目仅用于学习和演示目的。

## 联系方式

如有问题或建议，欢迎联系开发者。

---

**注意**: 这是一个演示项目，不包含真实的支付功能和后端服务。在实际部署前需要集成真实的支付系统和服务器API。

